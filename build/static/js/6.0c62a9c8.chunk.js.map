{"version":3,"sources":["pages/user/add-form.jsx","pages/user/user.jsx"],"names":["Item","layout","labelCol","span","wrapperCol","AddForm","state","visible","addOpration","userInfo","loadInfo","console","log","setState","Object","assign","refs","formRef","setFieldsValue","resetFields","handleOk","validateFields","then","values","data","props","loadMore","catch","handleCancel","e","this","title","centered","onOk","onCancel","okText","cancelText","ref","initialValues","label","name","rules","required","message","React","Component","confirm","User","loading","tableData","initColumns","columns","dataIndex","key","align","render","text","record","index","size","type","onClick","handleEdit","handleDelete","id","addForm","icon","okType","handleAdd","setTimeout","age","address","rowKey","dataSource"],"mappings":"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","file":"static/js/6.0c62a9c8.chunk.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Form, Input, Modal } from 'antd'\r\nconst Item = Form.Item\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 20 },\r\n};\r\n\r\nclass AddForm extends React.Component {\r\n  static propTypes = {\r\n    loadMore: PropTypes.func.isRequired\r\n  }\r\n  state = {\r\n    visible: false,\r\n    addOpration: true,\r\n    userInfo: {}\r\n  }\r\n  loadInfo = (addOpration, userInfo) => {\r\n    console.log(this)\r\n    this.setState({\r\n      visible: true,\r\n      addOpration,\r\n      userInfo: Object.assign({}, userInfo)\r\n    }, () => {\r\n      if (this.refs.formRef) {\r\n        if (userInfo) {\r\n          this.refs.formRef.setFieldsValue(userInfo)\r\n        } else {\r\n          this.refs.formRef.resetFields()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  handleOk = () => {\r\n    this.refs.formRef.validateFields().then(values => {\r\n      this.setState({\r\n        visible: false\r\n      })\r\n      let data = this.state.userInfo\r\n      data = Object.assign(data, values)\r\n      console.log(data)\r\n      this.props.loadMore()\r\n    }).catch(() => { })\r\n  }\r\n  handleCancel = (e) => {\r\n    this.setState({\r\n      visible: false\r\n    })\r\n  }\r\n  render () {\r\n    const { visible, addOpration, userInfo } = this.state\r\n    return (\r\n      <Modal visible={visible}\r\n        title={addOpration ? '添加用户' : '编辑用户'}\r\n        centered\r\n        onOk={this.handleOk}\r\n        onCancel={this.handleCancel}\r\n        okText={'确定'}\r\n        cancelText={'取消'}\r\n      >\r\n        <Form {...layout}\r\n          ref=\"formRef\"\r\n          initialValues={userInfo}>\r\n          <Item\r\n            label=\"用户名\"\r\n            name=\"name\"\r\n            rules={[{ required: true, message: '请输入用户名' }]}\r\n          >\r\n            <Input />\r\n          </Item>\r\n          <Item\r\n            label=\"年龄\"\r\n            name=\"age\"\r\n            rules={[{ required: true, message: '请输入年龄' }]}\r\n          >\r\n            <Input />\r\n          </Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n    )\r\n  }\r\n}\r\nexport default AddForm","import React from 'react'\r\nimport { Card, Table, Space, Button, Modal } from 'antd';\r\nimport { PlusOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport AddForm from './add-form'\r\n\r\nconst { confirm } = Modal\r\n\r\n\r\nclass User extends React.Component {\r\n  state = {\r\n    loading: true,\r\n    tableData: []\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: '姓名',\r\n        dataIndex: 'name',\r\n        key: 'name'\r\n      },\r\n      {\r\n        title: '年龄',\r\n        dataIndex: 'age',\r\n        key: 'age'\r\n      },\r\n      {\r\n        title: '地址',\r\n        dataIndex: 'address',\r\n        key: 'address'\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'action',\r\n        align: 'center',\r\n        render: (text, record, index) => (\r\n          <Space size=\"middle\">\r\n            <Button type=\"link\" onClick={() => this.handleEdit(record)}>编辑</Button>\r\n            <Button type=\"link\" onClick={() => this.handleDelete(record.id)}>删除</Button>\r\n          </Space>\r\n\r\n        )\r\n      }\r\n    ]\r\n  }\r\n  handleEdit = (record) => {\r\n    this.refs.addForm.loadInfo(false, record)\r\n  }\r\n  handleDelete = (id) => {\r\n    confirm({\r\n      title: '确定删除此项内容',\r\n      icon: <ExclamationCircleOutlined />,\r\n      okText: '确定',\r\n      okType: 'danger',\r\n      cancelText: '取消',\r\n      onOk: () => {\r\n        console.log(this)\r\n        console.log(id);\r\n        this.loadMore()\r\n      },\r\n      onCancel () {\r\n        console.log('Cancel');\r\n      },\r\n    })\r\n  }\r\n  handleAdd = () => {\r\n    this.refs.addForm.loadInfo(true)\r\n  }\r\n  UNSAFE_componentWillMount () {\r\n    this.initColumns()\r\n  }\r\n  loadMore = () => {\r\n    setTimeout(() => {\r\n      console.log('执行父组件')\r\n      const tableData = [\r\n        { id: 1, name: '王小明1', age: 22, address: '西湖区胡迪工1号' },\r\n        { id: 2, name: '王小明2', age: 22, address: '西湖区胡迪工2号' },\r\n        { id: 3, name: '王小明3', age: 22, address: '西湖区胡迪工3号' },\r\n        { id: 4, name: '王小明4', age: 22, address: '西湖区胡迪工4号' },\r\n        { id: 5, name: '王小明5', age: 22, address: '西湖区胡迪工5号' },\r\n        { id: 6, name: '王小明6', age: 22, address: '西湖区胡迪工6号' }\r\n      ]\r\n      this.setState({\r\n        tableData,\r\n        loading: false\r\n      })\r\n    }, 200)\r\n  }\r\n  componentDidMount () {\r\n    this.loadMore()\r\n  }\r\n\r\n  render () {\r\n    const { loading, tableData } = this.state\r\n    return (\r\n      <Card>\r\n        <Button type=\"primary\" icon={<PlusOutlined />} onClick={this.handleAdd}>添加</Button>\r\n        <Table rowKey='id' loading={loading} columns={this.columns} dataSource={tableData}></Table>\r\n        <AddForm ref=\"addForm\" loadMore={this.loadMore} />\r\n      </Card>\r\n    )\r\n  }\r\n}\r\nexport default User"],"sourceRoot":""}